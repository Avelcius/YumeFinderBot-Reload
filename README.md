# YumeFinderReload

[English version](README_EN.md)

Telegram-–±–æ—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ –∞—Ä—Ç–æ–≤ —Å —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–Ω–ª–∞–π–Ω-–ø–æ–∏—Å–∫ –ø–æ —Ç–µ–≥–∞–º, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º –∏ –∞–¥–º–∏–Ω-—Ñ—É–Ω–∫—Ü–∏–∏.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîé –ò–Ω–ª–∞–π–Ω-–ø–æ–∏—Å–∫ –∞—Ä—Ç–æ–≤ –ø–æ —Ç–µ–≥–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, @YumeFinderBot cat ears)
- üñåÔ∏è –í—ã–±–æ—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —á–µ—Ä–µ–∑ /settings
- üë§ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Å –∫–æ–º–∞–Ω–¥–∞–º–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- üîí –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –Ω–µ–∫–æ—Ç–æ—Ä—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø)
- üñºÔ∏è –ü–æ–¥–ø–∏—Å–∏ –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º —Å–æ–¥–µ—Ä–∂–∞—Ç —Ç–æ–ª—å–∫–æ –∏–º—è –∞–≤—Ç–æ—Ä–∞

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone <repository_url>
cd YumeFinderReload
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
npm install telegraf sqlite3 axios dotenv
```

3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`:
```env
BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
MASTER_ADMIN_ID=–≤–∞—à_telegram_id
```

- **BOT_TOKEN**: –ü–æ–ª—É—á–∏—Ç–µ —É @BotFather
- **MASTER_ADMIN_ID**: –í–∞—à Telegram ID (—É–∑–Ω–∞—Ç—å: –æ—Ç–ø—Ä–∞–≤—å—Ç–µ /start –±–æ—Ç—É, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏)

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
```bash
node bot.js
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã
- `/start` ‚Äî –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –∏ –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- `/settings` ‚Äî –í—ã–±—Ä–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–ª—è –ø–æ–∏—Å–∫–∞ –∞—Ä—Ç–æ–≤
- –ò–Ω–ª–∞–π–Ω-–ø–æ–∏—Å–∫: `@BotName <—Ç–µ–≥–∏>` (–Ω–∞–ø—Ä–∏–º–µ—Ä, @BotName cat ears blue_hair)

### –ê–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥—ã
- `/admin` ‚Äî –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥
- `/makeadmin <userId>` ‚Äî –ù–∞–∑–Ω–∞—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
- `/grantaccess <userId>` ‚Äî –î–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º
- `/ban <userId>` ‚Äî –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `/unban <userId>` ‚Äî –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –°–µ–∫—Ä–µ—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞
- `/getaccess` ‚Äî –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º (–Ω–µ —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è –≤ /admin)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- `bot.js` ‚Äî –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –±–æ—Ç–∞ (–∫–æ–º–∞–Ω–¥—ã, –∏–Ω–ª–∞–π–Ω-–∑–∞–ø—Ä–æ—Å—ã)
- `database.js` ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö SQLite (bot.db)
- `sources.js` ‚Äî –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (Danbooru, Gelbooru, –∏ —Ç.–¥.)
- `utils.js` ‚Äî –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞, –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–≥–æ–≤)
- `bot.db` ‚Äî SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `.env` ‚Äî –§–∞–π–ª —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π (—Ç–æ–∫–µ–Ω, ID –∞–¥–º–∏–Ω–∞)

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Node.js v22.14.0 –∏–ª–∏ –≤—ã—à–µ
- SQLite3 –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

## TODO
- [x] –ò–Ω–ª–∞–π–Ω-–ø–æ–∏—Å–∫ –ø–æ —Ç–µ–≥–∞–º
- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º—É–ª—å—Ç–∏—Ç–µ–≥–æ–≤
- [x] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ —á–µ—Ä–µ–∑ /settings
- [x] –ê–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥—ã (/makeadmin, /grantaccess, /ban, /unban)
- [x] –°–µ–∫—Ä–µ—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ /getaccess
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≥—Ä—É–ø–ø (—Ä–∞–±–æ—Ç–∞ –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–∞—Ö)
- [ ] –ö–æ–º–∞–Ω–¥–∞ /random (—Å–ª—É—á–∞–π–Ω—ã–π –∞—Ä—Ç –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞)
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π /random –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- [ ] –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Pixiv, DeviantArt)

## –û—Ç–ª–∞–¥–∫–∞

–õ–æ–≥–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å:
```
–ó–∞–ø—Ä–æ—Å—ã: –ò–Ω–ª–∞–π–Ω-–∑–∞–ø—Ä–æ—Å –æ—Ç <userId>: source=<source>, query=<query>, page=<page>
–û—à–∏–±–∫–∏: –û—à–∏–±–∫–∞ –¥–ª—è <updateType>: <error>
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:
```bash
sqlite3 bot.db
SELECT * FROM users;
```

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è
- –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, e621) –Ω—É–∂–µ–Ω —Å—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å—á–∏–∫–∞ (is_subscriber = 1)
- –ú—É–ª—å—Ç–∏—Ç–µ–≥–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è: –≤–≤–æ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, cat ears)
- –§–∞–π–ª .env –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ .gitignore, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —É—Ç–µ—á–∫–∏ —Ç–æ–∫–µ–Ω–∞

## –õ–∏—Ü–µ–Ω–∑–∏—è
MIT License